{"version":3,"sources":["webpack:///./src/components/Pulse/index.js","webpack:///./src/components/MagicBox/index.js","webpack:///./src/pages/simple.js","webpack:///./src/components/back.js","webpack:///./node_modules/classnames/index.js"],"names":["Pulse","render","this","props","style","left","x","top","y","className","styles","Item","React","Component","MagicBox","_container","_pulling","on","_setContainerRef","element","_onMouseDown","pageX","pageY","_onMouseMove","target","_sizes","_getOffset","halfWidth","width","halfHeight","height","tensionX","tensionY","pullingX","Math","abs","pullingY","scaleX","scaleY","transform","_ff","join","setState","textStyle","n","toString","split","map","i","substring","_onMouseUp","state","_onClick","pulled","offset","pulses","counter","_setRandColor","_createPulse","_onMouseLeave","event","getBoundingClientRect","_generateRandColor","backgroundColor","highlightText","containerStyle","clicked","classNames","Container","HighlightText","questMessage","ref","onMouseLeave","onMouseDown","onMouseMove","onMouseUp","onClick","Text","Object","keys","key","componentWillUnmount","forEach","clearTimeout","disconnect","increment","setTimeout","_getRandRGBA","r","g","b","a","opacity","sqrt","_pow","_getRandInt","_getRandArbitrary","min","max","random","floor","v","pow","offsetLeft","offsetTop","SimplePage","Back","to","hasOwn","hasOwnProperty","classes","arguments","length","arg","argType","push","Array","isArray","inner","apply","call","module","exports"],"mappings":"iNAeeA,E,gLAXbC,OAAA,WAAU,IAAD,EACUC,KAAKC,MAChBC,EAAQ,CACZC,KAHK,EACCC,EAGNC,IAJK,EACIC,GAMX,OAAO,yBAAKC,UAAWC,IAAOC,KAAMP,MAAOA,K,GAR3BQ,IAAMC,W,0KCsRXC,E,oBAlRb,WAAYX,GAAQ,IAAD,GACjB,cAAMA,IAAN,MAsEFY,WAAa,KAvEM,EAyEnBC,SAAW,CACTC,IAAI,EACJX,EAAG,EACHE,EAAG,GA5Ec,EA+EnBU,iBAAmB,SAAAC,GACjB,EAAKJ,WAAaI,GAhFD,EAmFnBC,aAAe,YAAuB,IAApBC,EAAmB,EAAnBA,MAAOC,EAAY,EAAZA,MACvB,EAAKN,SAASV,EAAIe,EAClB,EAAKL,SAASR,EAAIc,GArFD,EAwFnBC,aAAe,YAA+B,IAA5BF,EAA2B,EAA3BA,MAAOC,EAAoB,EAApBA,MAAOE,EAAa,EAAbA,OAC9B,GAAK,EAAKC,OAAV,CAD2C,MAM1B,EAAKC,WAAW,CAAEL,QAAOC,QAAOE,WAAzClB,EANmC,EAMnCA,EAAGE,EANgC,EAMhCA,EANgC,EAOjB,EAAKiB,OACzBE,EARqC,EAOnCC,MACkB,EACpBC,EATqC,EAO5BC,OAEa,EAGtBC,GAFSzB,EAAIqB,EAAYrB,EAAIqB,IAAcA,EAAYrB,IAEnCqB,EACpBK,GAFSxB,EAAIqB,EAAarB,EAAIqB,IAAeA,EAAarB,IAEtCqB,EAIpBI,EAAW,EAAKjB,SAASV,EAAI4B,KAAKC,IAAId,EAAQ,EAAKL,SAASV,GAAK,EACjE8B,EAAW,EAAKpB,SAASR,EAAI0B,KAAKC,IAAIb,EAAQ,EAAKN,SAASR,GAAK,EACjE6B,EAASJ,GAAYA,EAAW,IAAM,IAAM,EAC5CK,EAASF,GAAYA,EAAW,IAAM,IAAM,GAE9CC,EAAS,GAAKC,EAAS,KACzB,EAAKtB,SAASC,IAAK,GAGrB,IAAMsB,EACJF,EAAS,GAAKC,EAAS,EACnB,CAAC,UACUD,EAAS,EAAI,EAAKG,IAAIH,GAAU,GAD3C,MAEIC,EAAS,EAAI,EAAKE,IAAIF,GAAU,GAFpC,KAIEG,KAAK,IACP,GAEN,EAAKC,SAAS,CACZC,UAAW,CACTtC,KAvBkB,IAuBI0B,EACtBxB,IAvBkB,GAuBGyB,EACrBO,iBA/Ha,EAqInBC,IAAM,SAAAI,GAAC,OACLA,EACGC,WACAC,MAAM,KACNC,IAAI,SAACH,EAAGI,GAAJ,OAAYA,EAAQJ,EAAEK,UAAU,EAAG,GAAnBL,IACpBH,KAAK,MA1IS,EA4InBS,WAAa,WACX,EAAKlC,SAASV,EAAI,EAClB,EAAKU,SAASR,EAAI,EAClB,EAAKkC,SAAS,CACZC,UAAU,OAAD,UACJ,EAAKQ,MAAMR,UADP,CAEPJ,UAAW,QAlJE,EAuJnBa,SAAW,YAA+B,IAA5B/B,EAA2B,EAA3BA,MAAOC,EAAoB,EAApBA,MAAOE,EAAa,EAAbA,OAC1B,GAAI,EAAKR,SAASC,GAKhB,OAJA,EAAKD,SAASV,EAAI,EAClB,EAAKU,SAASR,EAAI,EAClB,EAAKQ,SAASC,IAAK,OACnB,EAAKyB,SAAS,CAAEW,QAAQ,IAI1B,IAAMC,EAAS,EAAK5B,WAAW,CAAEL,QAAOC,QAAOE,WATR,EAUX,EAAK2B,MAAzBI,EAV+B,EAU/BA,OAAQC,EAVuB,EAUvBA,QAEhB,EAAKC,gBACL,EAAKC,aAAL,iBACKJ,EADL,CAEEC,SACAC,cAvKe,EA2KnBG,cAAgB,SAAAC,GAAU,IAAD,EACN,EAAKlC,WAAWkC,GAAzBtD,EADe,EACfA,EAAGE,EADY,EACZA,EADY,EAEG,EAAKO,WAAW8C,wBAAlCjC,EAFe,EAEfA,MAAOE,EAFQ,EAERA,OAEf,EAAKd,SAASV,EAAI,EAClB,EAAKU,SAASR,EAAI,EAClB,EAAKQ,SAASC,IAAK,GAEfX,EAAI,GAAKA,EAAIsB,GAASpB,EAAI,GAAKA,EAAIsB,IACrC,EAAKY,SAAS,CACZC,UAAW,CACTJ,UAAW,GACXlC,KAAM,EACNE,IAAK,MAxLM,MAG0B,EAAKuD,qBAAxCC,EAHS,EAGTA,gBAAiBC,EAHR,EAGQA,cAHR,OAKjB,EAAKb,MAAQ,CACXc,eAAgB,CACdF,mBAEFpB,UAAW,CACTJ,UAAW,GACXlC,KAAM,EACNE,IAAK,GAEPyD,gBACAT,OAAQ,GACRC,QAAS,EACTU,SAAS,EACTb,QAAQ,GAlBO,E,wHAsBnBpD,OAAA,WAAU,IAAD,IAQHC,KAAKiD,MANPc,EAFK,EAELA,eACAtB,EAHK,EAGLA,UACAqB,EAJK,EAILA,cACAT,EALK,EAKLA,OACAW,EANK,EAMLA,QACAb,EAPK,EAOLA,OAGI5C,EAAY0D,MAAU,MACzBzD,IAAO0D,YAAY,EADM,EAEzB1D,IAAO2D,eAAgBL,EAFE,IAKtBM,EACJjB,GAAUa,EAAV,eAAqCA,EAAO,qBAE9C,OACE,yBACEzD,UAAWA,EACX8D,IAAKrE,KAAKgB,iBACVd,MAAO6D,EACPO,aAActE,KAAKyD,cACnBc,YAAavE,KAAKkB,aAClBsD,YAAaxE,KAAKqB,aAClBoD,UAAWzE,KAAKgD,WAChB0B,QAAS1E,KAAKkD,UAEd,0BAAM3C,UAAWC,IAAOmE,KAAMzE,MAAOuC,GAClC2B,GAEFQ,OAAOC,KAAKxB,GAAQR,IAAI,SAAAiC,GAAQ,IAAD,EACbzB,EAAOyB,GAAhB1E,EADsB,EACtBA,EAAGE,EADmB,EACnBA,EAEX,OAAO,kBAAC,EAAD,CAAOwE,IAAKA,EAAK1E,EAAGA,EAAGE,EAAGA,Q,EAMzCyE,qBAAA,WAAwB,IACd1B,EAAWrD,KAAKiD,MAAhBI,OAERuB,OAAOC,KAAKxB,GAAQ2B,QAAQ,SAAAF,GAC1BG,aAAa5B,EAAOyB,GAAKI,e,EA2H7B1B,aAAA,YAAyC,IAAD,OAAzBpD,EAAyB,EAAzBA,EAAGE,EAAsB,EAAtBA,EAAG+C,EAAmB,EAAnBA,OACb8B,EADgC,EAAX7B,QACC,EAE5BD,EAAO8B,GAAa,CAClBD,WAAYE,WAAW,kBACd/B,EAAO8B,GAEd,EAAK3C,SAAS,CACZa,YAED,KACHjD,IACAE,KAGFN,KAAKwC,SAAS,CACZwB,SAAS,EACTV,QAAS6B,EACT9B,Y,EAIJE,cAAA,WAAiB,IAAD,EAC6BvD,KAAK4D,qBAAxCC,EADM,EACNA,gBAAiBC,EADX,EACWA,cAEzB9D,KAAKwC,SAAS,CACZuB,eAAgB,CAAEF,mBAClBC,mB,EAIJF,mBAAA,WAAsB,IAAD,EACI5D,KAAKqF,eAApBC,EADW,EACXA,EAAGC,EADQ,EACRA,EAAGC,EADK,EACLA,EAAGC,EADE,EACFA,EACXC,EAAU1D,KAAK2D,KAAKF,GAG1B,MAAO,CACL5B,gBAAgB,QAASyB,EAAV,IAAeC,EAAf,IAAoBC,EAApB,IAAyBE,EAAzB,IACf5B,cAJc9D,KAAK4F,KAAKN,GAAKtF,KAAK4F,KAAKL,GAAKvF,KAAK4F,KAAKJ,GAI7B,QAAUE,EAAU,M,EAIjDL,aAAA,WACE,MAAO,CACLC,EAAGtF,KAAK6F,YAAY,EAAG,KACvBN,EAAGvF,KAAK6F,YAAY,EAAG,KACvBL,EAAGxF,KAAK6F,YAAY,EAAG,KACvBJ,EAAGzF,KAAK8F,kBAAkB,EAAG,K,EAIjCA,kBAAA,SAAkBC,EAAKC,GACrB,OAAOhE,KAAKiE,UAAYD,EAAMD,GAAOA,G,EAGvCF,YAAA,SAAYE,EAAKC,GACf,OAAOhE,KAAKkE,MAAMlE,KAAKiE,UAAYD,EAAMD,IAAQA,G,EAGnDH,KAAA,SAAKO,GACH,OAAOnE,KAAKoE,IAAI,IAAMD,EAAG,I,EAG3B3E,WAAA,YAAsC,IAAzBL,EAAwB,EAAxBA,MAAOC,EAAiB,EAAjBA,MAAOE,EAAU,EAAVA,OACzB,MAAO,CACLlB,EAAGe,EAAQG,EAAO+E,WAClB/F,EAAGc,EAAQE,EAAOgF,Y,qCAKpB,IAAKtG,KAAKa,WACR,OAAO,KAFE,MAKeb,KAAKa,WAAW8C,wBAE1C,MAAO,CACLjC,MARS,EAKHA,MAINE,OATS,EAKIA,a,8BA1QIlB,IAAMC,W,SCOd4F,UAPI,kBACjB,kBAAC,IAAD,KACE,kBAAC,IAAD,MACA,kBAAC,EAAD,S,iCCTJ,qCASeC,IANF,kBACX,gCACS,kBAAC,IAAD,CAAMC,GAAG,KAAT,W,oBCLX,QAAQ,IASR,WACE,aAEA,IAAIC,EAAS,GAAGC,eAEhB,SAAS1C,IAGP,IAFA,IAAI2C,EAAU,GAEL9D,EAAI,EAAGA,EAAI+D,UAAUC,OAAQhE,IAAK,CACzC,IAAIiE,EAAMF,UAAU/D,GACpB,GAAKiE,EAAL,CACA,IAAIC,SAAiBD,EAErB,GAAgB,WAAZC,GAAoC,WAAZA,EAC1BJ,EAAQK,KAAKF,QACR,GAAIG,MAAMC,QAAQJ,IAAQA,EAAID,OAAQ,CAC3C,IAAIM,EAAQnD,EAAWoD,MAAM,KAAMN,GAE/BK,GACFR,EAAQK,KAAKG,QAEV,GAAgB,WAAZJ,EACT,IAAK,IAAIlC,KAAOiC,EACVL,EAAOY,KAAKP,EAAKjC,IAAQiC,EAAIjC,IAC/B8B,EAAQK,KAAKnC,IAMrB,OAAO8B,EAAQrE,KAAK,KAGegF,EAAOC,SAC1CvD,EAAoB,QAAIA,EACxBsD,EAAOC,QAAUvD,QAKhB,KAFwB,EAAF,WACrB,OAAOA,GACR,QAFoB,OAEpB,aAxCL","file":"component---src-pages-simple-js-3266252f442407d8f908.js","sourcesContent":["import React from 'react'\r\nimport styles from 'styles/main.module.css'\r\n\r\nclass Pulse extends React.Component {\r\n  render() {\r\n    const { x, y } = this.props\r\n    const style = {\r\n      left: x,\r\n      top: y,\r\n    }\r\n\r\n    return <div className={styles.Item} style={style} />\r\n  }\r\n}\r\n\r\nexport default Pulse\r\n","import React from 'react'\r\nimport classNames from 'classnames'\r\n\r\nimport Pulse from 'components/Pulse'\r\nimport styles from 'styles/main.module.css'\r\n\r\nclass MagicBox extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    const { backgroundColor, highlightText } = this._generateRandColor()\r\n\r\n    this.state = {\r\n      containerStyle: {\r\n        backgroundColor,\r\n      },\r\n      textStyle: {\r\n        transform: '',\r\n        left: 0,\r\n        top: 0,\r\n      },\r\n      highlightText,\r\n      pulses: {},\r\n      counter: 0,\r\n      clicked: false,\r\n      pulled: false,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      containerStyle,\r\n      textStyle,\r\n      highlightText,\r\n      pulses,\r\n      clicked,\r\n      pulled,\r\n    } = this.state\r\n\r\n    const className = classNames({\r\n      [styles.Container]: true,\r\n      [styles.HighlightText]: highlightText,\r\n    })\r\n\r\n    const questMessage =\r\n      pulled && clicked ? `what's next?` : clicked ? `pull me` : `click me`\r\n\r\n    return (\r\n      <div\r\n        className={className}\r\n        ref={this._setContainerRef}\r\n        style={containerStyle}\r\n        onMouseLeave={this._onMouseLeave}\r\n        onMouseDown={this._onMouseDown}\r\n        onMouseMove={this._onMouseMove}\r\n        onMouseUp={this._onMouseUp}\r\n        onClick={this._onClick}\r\n      >\r\n        <span className={styles.Text} style={textStyle}>\r\n          {questMessage}\r\n        </span>\r\n        {Object.keys(pulses).map(key => {\r\n          const { x, y } = pulses[key]\r\n\r\n          return <Pulse key={key} x={x} y={y} />\r\n        })}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { pulses } = this.state\r\n\r\n    Object.keys(pulses).forEach(key => {\r\n      clearTimeout(pulses[key].disconnect)\r\n    })\r\n  }\r\n\r\n  _container = null\r\n\r\n  _pulling = {\r\n    on: false,\r\n    x: 0,\r\n    y: 0,\r\n  }\r\n\r\n  _setContainerRef = element => {\r\n    this._container = element\r\n  }\r\n\r\n  _onMouseDown = ({ pageX, pageY }) => {\r\n    this._pulling.x = pageX\r\n    this._pulling.y = pageY\r\n  }\r\n\r\n  _onMouseMove = ({ pageX, pageY, target }) => {\r\n    if (!this._sizes) {\r\n      return\r\n    }\r\n\r\n    // offset\r\n    const { x, y } = this._getOffset({ pageX, pageY, target })\r\n    const { width, height } = this._sizes\r\n    const halfWidth = width / 2\r\n    const halfHeight = height / 2\r\n    const deltaX = x > halfWidth ? x - halfWidth : -(halfWidth - x)\r\n    const deltaY = y > halfHeight ? y - halfHeight : -(halfHeight - y)\r\n    const tensionX = deltaX / halfWidth\r\n    const tensionY = deltaY / halfHeight\r\n    const maxDeviationX = 120\r\n    const maxDeviationY = 60\r\n    // scale\r\n    const pullingX = this._pulling.x ? Math.abs(pageX - this._pulling.x) : 0\r\n    const pullingY = this._pulling.y ? Math.abs(pageY - this._pulling.y) : 0\r\n    const scaleX = pullingX ? (pullingX + 64) / 100 : 0\r\n    const scaleY = pullingY ? (pullingY + 64) / 100 : 0\r\n\r\n    if (scaleX > 1 || scaleY > 1) {\r\n      this._pulling.on = true\r\n    }\r\n\r\n    const transform =\r\n      scaleX > 1 || scaleY > 1\r\n        ? [\r\n            `scale(${scaleX > 1 ? this._ff(scaleX) : 1}, ${\r\n              scaleY > 1 ? this._ff(scaleY) : 1\r\n            })`,\r\n          ].join('')\r\n        : ''\r\n\r\n    this.setState({\r\n      textStyle: {\r\n        left: maxDeviationX * tensionX,\r\n        top: maxDeviationY * tensionY,\r\n        transform,\r\n      },\r\n    })\r\n  }\r\n\r\n  // fast format float => string ~1.23\r\n  _ff = n =>\r\n    n\r\n      .toString()\r\n      .split('.')\r\n      .map((n, i) => (!i ? n : n.substring(0, 2)))\r\n      .join('.')\r\n\r\n  _onMouseUp = () => {\r\n    this._pulling.x = 0\r\n    this._pulling.y = 0\r\n    this.setState({\r\n      textStyle: {\r\n        ...this.state.textStyle,\r\n        transform: '',\r\n      },\r\n    })\r\n  }\r\n\r\n  _onClick = ({ pageX, pageY, target }) => {\r\n    if (this._pulling.on) {\r\n      this._pulling.x = 0\r\n      this._pulling.y = 0\r\n      this._pulling.on = false\r\n      this.setState({ pulled: true })\r\n      return\r\n    }\r\n\r\n    const offset = this._getOffset({ pageX, pageY, target })\r\n    const { pulses, counter } = this.state\r\n\r\n    this._setRandColor()\r\n    this._createPulse({\r\n      ...offset,\r\n      pulses,\r\n      counter,\r\n    })\r\n  }\r\n\r\n  _onMouseLeave = event => {\r\n    const { x, y } = this._getOffset(event)\r\n    const { width, height } = this._container.getBoundingClientRect()\r\n\r\n    this._pulling.x = 0\r\n    this._pulling.y = 0\r\n    this._pulling.on = false\r\n\r\n    if (x < 0 || x > width || y < 0 || y > height) {\r\n      this.setState({\r\n        textStyle: {\r\n          transform: '',\r\n          left: 0,\r\n          top: 0,\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  _createPulse({ x, y, pulses, counter }) {\r\n    const increment = counter + 1\r\n\r\n    pulses[increment] = {\r\n      disconnect: setTimeout(() => {\r\n        delete pulses[increment]\r\n\r\n        this.setState({\r\n          pulses,\r\n        })\r\n      }, 5000),\r\n      x,\r\n      y,\r\n    }\r\n\r\n    this.setState({\r\n      clicked: true,\r\n      counter: increment,\r\n      pulses,\r\n    })\r\n  }\r\n\r\n  _setRandColor() {\r\n    const { backgroundColor, highlightText } = this._generateRandColor()\r\n\r\n    this.setState({\r\n      containerStyle: { backgroundColor },\r\n      highlightText,\r\n    })\r\n  }\r\n\r\n  _generateRandColor() {\r\n    const { r, g, b, a } = this._getRandRGBA()\r\n    const opacity = Math.sqrt(a)\r\n    const darkest = this._pow(r) + this._pow(g) + this._pow(b)\r\n\r\n    return {\r\n      backgroundColor: `rgba(${r},${g},${b},${opacity})`,\r\n      highlightText: darkest > 123456 && opacity > 0.78,\r\n    }\r\n  }\r\n\r\n  _getRandRGBA() {\r\n    return {\r\n      r: this._getRandInt(0, 256),\r\n      g: this._getRandInt(0, 256),\r\n      b: this._getRandInt(0, 256),\r\n      a: this._getRandArbitrary(0, 1),\r\n    }\r\n  }\r\n\r\n  _getRandArbitrary(min, max) {\r\n    return Math.random() * (max - min) + min\r\n  }\r\n\r\n  _getRandInt(min, max) {\r\n    return Math.floor(Math.random() * (max - min)) + min\r\n  }\r\n\r\n  _pow(v) {\r\n    return Math.pow(256 - v, 2)\r\n  }\r\n\r\n  _getOffset({ pageX, pageY, target }) {\r\n    return {\r\n      x: pageX - target.offsetLeft,\r\n      y: pageY - target.offsetTop,\r\n    }\r\n  }\r\n\r\n  get _sizes() {\r\n    if (!this._container) {\r\n      return null\r\n    }\r\n\r\n    const { width, height } = this._container.getBoundingClientRect()\r\n\r\n    return {\r\n      width,\r\n      height,\r\n    }\r\n  }\r\n}\r\n\r\nexport default MagicBox\r\n","import React from 'react'\r\n\r\nimport Back from 'components/back'\r\nimport MagicBox from 'components/MagicBox'\r\nimport Layout from 'components/layout'\r\n\r\nconst SimplePage = () => (\r\n  <Layout>\r\n    <Back />\r\n    <MagicBox />\r\n  </Layout>\r\n)\r\n\r\nexport default SimplePage\r\n","import React from 'react'\r\nimport Link from 'gatsby-link'\r\n\r\nconst Back = () => (\r\n  <p>\r\n    &larr; <Link to=\"/\">Back</Link>\r\n  </p>\r\n)\r\n\r\nexport default Back\r\n","require(\"core-js/modules/es6.array.is-array\");\n\n/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n\n/* global define */\n(function () {\n  'use strict';\n\n  var hasOwn = {}.hasOwnProperty;\n\n  function classNames() {\n    var classes = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      var arg = arguments[i];\n      if (!arg) continue;\n      var argType = typeof arg;\n\n      if (argType === 'string' || argType === 'number') {\n        classes.push(arg);\n      } else if (Array.isArray(arg) && arg.length) {\n        var inner = classNames.apply(null, arg);\n\n        if (inner) {\n          classes.push(inner);\n        }\n      } else if (argType === 'object') {\n        for (var key in arg) {\n          if (hasOwn.call(arg, key) && arg[key]) {\n            classes.push(key);\n          }\n        }\n      }\n    }\n\n    return classes.join(' ');\n  }\n\n  if (typeof module !== 'undefined' && module.exports) {\n    classNames[\"default\"] = classNames;\n    module.exports = classNames;\n  } else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n    // register as 'classnames', consistent with npm package name\n    define('classnames', [], function () {\n      return classNames;\n    });\n  } else {\n    window.classNames = classNames;\n  }\n})();"],"sourceRoot":""}